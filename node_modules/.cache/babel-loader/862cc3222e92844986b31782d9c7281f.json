{"ast":null,"code":"var _jsxFileName = \"/Users/riannacleary/Desktop/mod5/galaxybnb_frontend/src/components/PlanetLocations.jsx\";\nimport React, { Component } from 'react';\nimport { Grid, Image, Card, Button, Icon, Modal, Header } from 'semantic-ui-react';\nimport Emoji from './Emoji';\nimport ReviewForm from './ReviewForm';\nimport StripeCheckout from 'react-stripe-checkout';\n\nclass PlanetLocations extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      open: false,\n      location_id: 0\n    };\n\n    this.open = () => this.setState({\n      open: true\n    });\n\n    this.close = () => this.setState({\n      open: false\n    });\n\n    this.sendData = planetObj => {\n      this.props.getPlanetObj(planetObj);\n    };\n\n    this.renderPlanetNames = () => {\n      return this.props.stateFromMain.planets.map(planet => {\n        return planet ? planet.name : 'meow';\n      });\n    };\n\n    this.handleClick = evt => {\n      // console.log(this.state.location_id, this.props.stateFromMain.token)\n      // let {token} = this.props.stateFromMain\n      // if (token) {\n      fetch('http://localhost:4000/bookings', {\n        method: 'POST',\n        headers: {\n          'content-type': 'application/json',\n          'Authorization': `bearer ${this.props.stateFromMain.token}`\n        },\n        body: JSON.stringify({\n          location_id: this.state.location_id,\n          datesRange: this.props.stateFromMain.datesRange,\n          numOfTravelers: this.props.stateFromMain.numOfTravelers\n        })\n      }).then(r => r.json()) // .then(console.log)\n      .then(bookingObj => {\n        this.props.addBooking(bookingObj);\n      });\n    };\n\n    this.onToken = token => {\n      const charge = {\n        token: token.id\n      };\n      const config = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          charge: charge,\n          price: 1999\n        })\n      };\n      fetch('http://localhost:4000/charges', config).then(res => res.json()).then(charge => {\n        if (charge) {\n          this.handleClick();\n        }\n      });\n    };\n\n    this.nestedModal = () => {\n      const {\n        open\n      } = this.state;\n      return React.createElement(Modal, {\n        open: open,\n        onOpen: this.open,\n        onClose: this.close,\n        size: \"small\",\n        trigger: React.createElement(StripeCheckout, {\n          token: this.onToken,\n          stripeKey: process.env.REACT_APP_STRIPE_API_KEY,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, React.createElement(Button, {\n          disabled: this.props.stateFromMain.token ? false : true,\n          circular: true,\n          inverted: true,\n          color: \"violet\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }, \"Book Location \", React.createElement(Icon, {\n          name: \"right chevron\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }))),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      });\n    };\n\n    this.handleBooking = id => {\n      this.setState({\n        location_id: id\n      });\n    };\n\n    this.renderLocations = state => {\n      let {\n        datesRange,\n        numOfTravelers\n      } = this.props.stateFromMain;\n      let {\n        name\n      } = this.props.stateFromMain.planetObj;\n      return this.props.stateFromMain.planetObj.locations ? this.props.stateFromMain.planetObj.locations.map(locationObj => {\n        return React.createElement(Grid.Column, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }, React.createElement(Card.Group, {\n          centered: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }, React.createElement(Image, {\n          src: locationObj.image,\n          wrapped: true,\n          ui: false,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }), React.createElement(Card.Content, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        }, React.createElement(Card.Header, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        }, locationObj.name), React.createElement(Modal, {\n          trigger: React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 133\n            },\n            __self: this\n          }, React.createElement(Button, {\n            animated: true,\n            inverted: true,\n            color: \"violet\",\n            size: \"small\",\n            onClick: () => this.handleBooking(locationObj.id),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 134\n            },\n            __self: this\n          }, React.createElement(Button.Content, {\n            visible: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 135\n            },\n            __self: this\n          }, \"Board Ship\"), React.createElement(Button.Content, {\n            hidden: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 136\n            },\n            __self: this\n          }, React.createElement(Emoji, {\n            symbol: \"\\uD83D\\uDE80\\uD83D\\uDE80\\uD83D\\uDE80\",\n            label: \"spaceship\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 137\n            },\n            __self: this\n          })))),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }, React.createElement(Modal.Header, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140\n          },\n          __self: this\n        }, \"Confirmation\"), React.createElement(Modal.Content, {\n          image: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"image\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }, React.createElement(Image, {\n          wrapped: true,\n          size: \"medium\",\n          src: \"../baby_yoda.png\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        })), React.createElement(Modal.Description, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          },\n          __self: this\n        }, \"Planet: \", name), React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          },\n          __self: this\n        }, \"Location: \", locationObj.name), React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148\n          },\n          __self: this\n        }, \"Date Range: \", datesRange), React.createElement(\"h3\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149\n          },\n          __self: this\n        }, \"Number of Travelers: \", numOfTravelers))), React.createElement(Modal.Actions, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          },\n          __self: this\n        }, this.nestedModal())), React.createElement(Modal, {\n          trigger: React.createElement(Button, {\n            inverted: true,\n            color: \"violet\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 158\n            },\n            __self: this\n          }, React.createElement(Button.Content, {\n            visible: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 159\n            },\n            __self: this\n          }, \"Desc\")),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }, React.createElement(Modal.Header, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162\n          },\n          __self: this\n        }, locationObj.name), React.createElement(Modal.Content, {\n          image: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          },\n          __self: this\n        }, React.createElement(Image, {\n          wrapped: true,\n          size: \"medium\",\n          src: locationObj.image,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164\n          },\n          __self: this\n        }), React.createElement(Modal.Description, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165\n          },\n          __self: this\n        }, React.createElement(Header, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        }), locationObj.reviews.map(review => {\n          return React.createElement(\"p\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 168\n            },\n            __self: this\n          }, review.rating);\n        }), React.createElement(ReviewForm, {\n          token: this.props.stateFromMain.token,\n          addReview: this.props.addReview,\n          locationId: locationObj.id,\n          error_message: this.props.stateFromMain.error_message,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170\n          },\n          __self: this\n        })))))));\n      }) : 'The force is not with you.';\n    };\n  }\n\n  componentDidMount() {\n    // debugger;\n    let planetId = this.props.match.params.id; // console.log(planetId)\n    // debugger\n\n    fetch(`http://localhost:4000/planets/${planetId}`).then(r => r.json()).then(planetObj => {\n      this.sendData(planetObj);\n    });\n  }\n\n  render() {\n    // debugger;\n    // console.log('STATE FROM PLANET_LOCATIONS', this.state.planetObj)\n    console.log(this.props.stateFromMain.planetObj.image);\n    console.log(this.state.location_id);\n    console.log('PROPS FROM PLANET_LOCATIONS', this.props.stateFromMain.error_message);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      centered: true,\n      columns: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(Grid.Column, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(Image, {\n      src: this.props.stateFromMain.planetObj.image,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    })), React.createElement(Grid.Row, {\n      centered: true,\n      columns: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    })), this.renderLocations());\n  }\n\n}\n\nexport default PlanetLocations; // <Modal\n//   open={open}\n//   onOpen={this.open}\n//   onClose={this.close}\n//   size='small'\n//   trigger={\n// <Button disabled={ this.props.stateFromMain.token ? false : true} circular={true} inverted color='violet' onClick={this.handleClick}>\n//   Book Location <Icon name='right chevron' />\n// </Button>\n// }\n// >","map":{"version":3,"sources":["/Users/riannacleary/Desktop/mod5/galaxybnb_frontend/src/components/PlanetLocations.jsx"],"names":["React","Component","Grid","Image","Card","Button","Icon","Modal","Header","Emoji","ReviewForm","StripeCheckout","PlanetLocations","state","open","location_id","setState","close","sendData","planetObj","props","getPlanetObj","renderPlanetNames","stateFromMain","planets","map","planet","name","handleClick","evt","fetch","method","headers","token","body","JSON","stringify","datesRange","numOfTravelers","then","r","json","bookingObj","addBooking","onToken","charge","id","config","price","res","nestedModal","process","env","REACT_APP_STRIPE_API_KEY","handleBooking","renderLocations","locations","locationObj","image","reviews","review","rating","addReview","error_message","componentDidMount","planetId","match","params","render","console","log"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Grid, Image, Card, Button, Icon, Modal, Header } from 'semantic-ui-react'\nimport Emoji from './Emoji'\nimport ReviewForm from './ReviewForm'\nimport StripeCheckout from 'react-stripe-checkout'\n\n\nclass PlanetLocations extends Component {\n\n  state = {\n    open: false,\n    location_id: 0\n  }\n\n  open = () => this.setState({ open: true })\n  close = () => this.setState({ open: false })\n\n  sendData = (planetObj) => {\n    this.props.getPlanetObj(planetObj);\n  }\n\n  componentDidMount() {\n    // debugger;\n    let planetId = this.props.match.params.id;\n    // console.log(planetId)\n    // debugger\n    fetch(`http://localhost:4000/planets/${planetId}`)\n    .then(r => r.json())\n    .then(planetObj => {\n      this.sendData(planetObj)\n    })\n  }\n\n  renderPlanetNames = () => {\n    return this.props.stateFromMain.planets.map((planet) => {\n      return (\n        planet ? planet.name : 'meow'\n      )\n    })\n  }\n\n  handleClick = (evt) => {\n    // console.log(this.state.location_id, this.props.stateFromMain.token)\n    // let {token} = this.props.stateFromMain\n\n    // if (token) {\n      fetch('http://localhost:4000/bookings', {\n        method: 'POST',\n        headers: {\n          'content-type': 'application/json',\n          'Authorization': `bearer ${this.props.stateFromMain.token}`\n        },\n        body: JSON.stringify({\n          location_id: this.state.location_id,\n          datesRange: this.props.stateFromMain.datesRange,\n          numOfTravelers: this.props.stateFromMain.numOfTravelers\n        })\n      })\n      .then(r => r.json())\n      // .then(console.log)\n      .then(bookingObj => {\n        this.props.addBooking(bookingObj)\n      })\n  }\n\n  onToken = (token) => {\n    const charge = {\n      token: token.id\n    };\n    const config = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        charge: charge,\n        price:  1999\n      })\n  }\n\n  fetch('http://localhost:4000/charges', config)\n    .then(res => res.json())\n    .then(charge => {\n      if (charge) {\n        this.handleClick()\n      }\n    })\n\n  }\n\n  nestedModal = () => {\n   const { open } = this.state\n\n    return  <Modal\n      open={open}\n      onOpen={this.open}\n      onClose={this.close}\n      size='small'\n      trigger={\n        <StripeCheckout\n          token={this.onToken}\n          stripeKey={process.env.REACT_APP_STRIPE_API_KEY}>\n        <Button\n          disabled={ this.props.stateFromMain.token ? false : true}\n          circular={true}\n          inverted color='violet'\n        >\n        Book Location <Icon name='right chevron' />\n        </Button>\n      </StripeCheckout>\n      }\n    >\n    </Modal>\n  }\n\n  handleBooking = (id) => {\n    this.setState({\n      location_id: id\n    })\n  }\n\n  renderLocations = (state) => {\n    let {datesRange, numOfTravelers} = this.props.stateFromMain\n    let {name} = this.props.stateFromMain.planetObj\n      return this.props.stateFromMain.planetObj.locations ? this.props.stateFromMain.planetObj.locations.map((locationObj) => {\n        return <Grid.Column>\n           <Card.Group centered={true}>\n            <Image src={locationObj.image} wrapped ui={false} />\n            <Card.Content>\n                <Card.Header>{locationObj.name}</Card.Header>\n\n              <Modal trigger={\n                <div>\n                <Button animated inverted color='violet' size='small' onClick={() => this.handleBooking(locationObj.id)}\n                ><Button.Content visible>Board Ship</Button.Content>\n                  <Button.Content hidden>\n                    <Emoji symbol=\"🚀🚀🚀\" label=\"spaceship\"/>\n                  </Button.Content></Button>\n                </div>}>\n                <Modal.Header>Confirmation</Modal.Header>\n                  <Modal.Content image>\n                    <div className='image'>\n                      <Image wrapped size='medium' src='../baby_yoda.png' />\n                    </div>\n                    <Modal.Description >\n                    <h1>Planet: { name }</h1>\n                    <h1>Location: {locationObj.name}</h1>\n                    <h2>Date Range: { datesRange }</h2>\n                    <h3>Number of Travelers: { numOfTravelers }</h3>\n                    </Modal.Description>\n                  </Modal.Content>\n                  <Modal.Actions>\n                    {this.nestedModal()}\n                  </Modal.Actions>\n              </Modal>\n\n              <Modal trigger={\n                <Button inverted color='violet'>\n                <Button.Content visible>Desc</Button.Content>\n                </Button>\n                }>\n              <Modal.Header>{locationObj.name}</Modal.Header>\n                <Modal.Content image>\n                  <Image wrapped size='medium' src={locationObj.image} />\n                  <Modal.Description>\n                  <Header></Header>\n                  {locationObj.reviews.map((review) => {\n                    return <p>{review.rating}</p>\n                  })}\n                  <ReviewForm token={this.props.stateFromMain.token} addReview={this.props.addReview} locationId={locationObj.id} error_message={this.props.stateFromMain.error_message}/>\n\n                 </Modal.Description>\n               </Modal.Content>\n              </Modal>\n              </Card.Content>\n             </Card.Group>\n          </Grid.Column>\n\n      }) : 'The force is not with you.'\n  }\n\n\n  render() {\n    // debugger;\n    // console.log('STATE FROM PLANET_LOCATIONS', this.state.planetObj)\n    console.log(this.props.stateFromMain.planetObj.image);\n    console.log(this.state.location_id);\n    console.log('PROPS FROM PLANET_LOCATIONS', this.props.stateFromMain.error_message)\n      return (\n        <div >\n        <Grid centered columns={2}>\n        <Grid.Column>\n          <Image src={this.props.stateFromMain.planetObj.image} />\n        </Grid.Column>\n        <Grid.Row centered columns={4}>\n        </Grid.Row>\n        </Grid>\n        {this.renderLocations()}\n        </div>\n      );\n  }\n}\n\n\n\nexport default PlanetLocations;\n// <Modal\n//   open={open}\n//   onOpen={this.open}\n//   onClose={this.close}\n//   size='small'\n//   trigger={\n// <Button disabled={ this.props.stateFromMain.token ? false : true} circular={true} inverted color='violet' onClick={this.handleClick}>\n//   Book Location <Icon name='right chevron' />\n// </Button>\n// }\n// >\n"]},"metadata":{},"sourceType":"module"}